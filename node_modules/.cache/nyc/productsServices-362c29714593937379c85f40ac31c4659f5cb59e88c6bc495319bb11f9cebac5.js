function cov_rtftiw29s(){var path="/home/artur/projetos/sd-016-b-store-manager/services/productsServices.js";var hash="179ea00c119e0319698347f57ead6f46a9dfd660";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/artur/projetos/sd-016-b-store-manager/services/productsServices.js",statementMap:{"0":{start:{line:1,column:23},end:{line:1,column:58}},"1":{start:{line:3,column:15},end:{line:7,column:1}},"2":{start:{line:4,column:19},end:{line:4,column:48}},"3":{start:{line:5,column:2},end:{line:5,column:54}},"4":{start:{line:5,column:17},end:{line:5,column:54}},"5":{start:{line:6,column:2},end:{line:6,column:43}},"6":{start:{line:9,column:16},end:{line:13,column:1}},"7":{start:{line:10,column:18},end:{line:10,column:50}},"8":{start:{line:11,column:2},end:{line:11,column:92}},"9":{start:{line:11,column:28},end:{line:11,column:92}},"10":{start:{line:12,column:2},end:{line:12,column:45}},"11":{start:{line:15,column:22},end:{line:18,column:1}},"12":{start:{line:16,column:22},end:{line:16,column:36}},"13":{start:{line:17,column:2},end:{line:17,column:71}},"14":{start:{line:17,column:48},end:{line:17,column:69}},"15":{start:{line:20,column:27},end:{line:32,column:1}},"16":{start:{line:21,column:25},end:{line:21,column:50}},"17":{start:{line:23,column:18},end:{line:23,column:73}},"18":{start:{line:24,column:2},end:{line:24,column:91}},"19":{start:{line:24,column:22},end:{line:24,column:91}},"20":{start:{line:26,column:2},end:{line:31,column:10}},"21":{start:{line:34,column:22},end:{line:42,column:1}},"22":{start:{line:35,column:19},end:{line:35,column:51}},"23":{start:{line:38,column:2},end:{line:38,column:93}},"24":{start:{line:38,column:29},end:{line:38,column:93}},"25":{start:{line:40,column:18},end:{line:40,column:72}},"26":{start:{line:41,column:2},end:{line:41,column:42}},"27":{start:{line:44,column:22},end:{line:49,column:1}},"28":{start:{line:45,column:19},end:{line:45,column:51}},"29":{start:{line:46,column:2},end:{line:46,column:93}},"30":{start:{line:46,column:29},end:{line:46,column:93}},"31":{start:{line:47,column:2},end:{line:47,column:41}},"32":{start:{line:48,column:2},end:{line:48,column:23}},"33":{start:{line:51,column:0},end:{line:58,column:2}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:3,column:15},end:{line:3,column:16}},loc:{start:{line:3,column:27},end:{line:7,column:1}},line:3},"1":{name:"(anonymous_1)",decl:{start:{line:9,column:16},end:{line:9,column:17}},loc:{start:{line:9,column:30},end:{line:13,column:1}},line:9},"2":{name:"(anonymous_2)",decl:{start:{line:15,column:22},end:{line:15,column:23}},loc:{start:{line:15,column:38},end:{line:18,column:1}},line:15},"3":{name:"(anonymous_3)",decl:{start:{line:17,column:35},end:{line:17,column:36}},loc:{start:{line:17,column:48},end:{line:17,column:69}},line:17},"4":{name:"(anonymous_4)",decl:{start:{line:20,column:27},end:{line:20,column:28}},loc:{start:{line:20,column:53},end:{line:32,column:1}},line:20},"5":{name:"(anonymous_5)",decl:{start:{line:34,column:22},end:{line:34,column:23}},loc:{start:{line:34,column:52},end:{line:42,column:1}},line:34},"6":{name:"(anonymous_6)",decl:{start:{line:44,column:22},end:{line:44,column:23}},loc:{start:{line:44,column:36},end:{line:49,column:1}},line:44}},branchMap:{"0":{loc:{start:{line:5,column:2},end:{line:5,column:54}},type:"if",locations:[{start:{line:5,column:2},end:{line:5,column:54}},{start:{line:5,column:2},end:{line:5,column:54}}],line:5},"1":{loc:{start:{line:11,column:2},end:{line:11,column:92}},type:"if",locations:[{start:{line:11,column:2},end:{line:11,column:92}},{start:{line:11,column:2},end:{line:11,column:92}}],line:11},"2":{loc:{start:{line:24,column:2},end:{line:24,column:91}},type:"if",locations:[{start:{line:24,column:2},end:{line:24,column:91}},{start:{line:24,column:2},end:{line:24,column:91}}],line:24},"3":{loc:{start:{line:38,column:2},end:{line:38,column:93}},type:"if",locations:[{start:{line:38,column:2},end:{line:38,column:93}},{start:{line:38,column:2},end:{line:38,column:93}}],line:38},"4":{loc:{start:{line:46,column:2},end:{line:46,column:93}},type:"if",locations:[{start:{line:46,column:2},end:{line:46,column:93}},{start:{line:46,column:2},end:{line:46,column:93}}],line:46}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"179ea00c119e0319698347f57ead6f46a9dfd660"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_rtftiw29s=function(){return actualCoverage;};}return actualCoverage;}cov_rtftiw29s();const productsModels=(cov_rtftiw29s().s[0]++,require('../models/productsModels'));cov_rtftiw29s().s[1]++;const getAll=async()=>{cov_rtftiw29s().f[0]++;const products=(cov_rtftiw29s().s[2]++,await productsModels.getAll());cov_rtftiw29s().s[3]++;if(!products){cov_rtftiw29s().b[0][0]++;cov_rtftiw29s().s[4]++;return{code:500,response:null};}else{cov_rtftiw29s().b[0][1]++;}cov_rtftiw29s().s[5]++;return{code:200,response:products};};cov_rtftiw29s().s[6]++;const getById=async id=>{cov_rtftiw29s().f[1]++;const product=(cov_rtftiw29s().s[7]++,await productsModels.getById(id));cov_rtftiw29s().s[8]++;if(product.length===0){cov_rtftiw29s().b[1][0]++;cov_rtftiw29s().s[9]++;return{code:404,message:{message:'Product not found'}};}else{cov_rtftiw29s().b[1][1]++;}cov_rtftiw29s().s[10]++;return{code:200,response:product[0]};};cov_rtftiw29s().s[11]++;const productExists=async name=>{cov_rtftiw29s().f[2]++;const allProducts=(cov_rtftiw29s().s[12]++,await getAll());cov_rtftiw29s().s[13]++;return allProducts.response.find(product=>{cov_rtftiw29s().f[3]++;cov_rtftiw29s().s[14]++;return product.name===name;});};cov_rtftiw29s().s[15]++;const registerNewProduct=async(name,quantity)=>{cov_rtftiw29s().f[4]++;const productExistss=(cov_rtftiw29s().s[16]++,await productExists(name));const product=(cov_rtftiw29s().s[17]++,await productsModels.registerNewProduct(name,quantity));cov_rtftiw29s().s[18]++;if(productExistss){cov_rtftiw29s().b[2][0]++;cov_rtftiw29s().s[19]++;return{code:409,message:{message:'Product already exists'}};}else{cov_rtftiw29s().b[2][1]++;}cov_rtftiw29s().s[20]++;return{code:201,response:{id:product.id,name,quantity}};};cov_rtftiw29s().s[21]++;const updateProduct=async(id,name,quantity)=>{cov_rtftiw29s().f[5]++;const searchId=(cov_rtftiw29s().s[22]++,await productsModels.getById(id));// const idExists = allProducts.find((product) => product.id === id);
cov_rtftiw29s().s[23]++;if(searchId.length===0){cov_rtftiw29s().b[3][0]++;cov_rtftiw29s().s[24]++;return{code:404,message:{message:'Product not found'}};}else{cov_rtftiw29s().b[3][1]++;}const product=(cov_rtftiw29s().s[25]++,await productsModels.updateProduct(id,name,quantity));cov_rtftiw29s().s[26]++;return{code:200,response:product};};cov_rtftiw29s().s[27]++;const deleteProduct=async id=>{cov_rtftiw29s().f[6]++;const searchId=(cov_rtftiw29s().s[28]++,await productsModels.getById(id));cov_rtftiw29s().s[29]++;if(searchId.length===0){cov_rtftiw29s().b[4][0]++;cov_rtftiw29s().s[30]++;return{code:404,message:{message:'Product not found'}};}else{cov_rtftiw29s().b[4][1]++;}cov_rtftiw29s().s[31]++;await productsModels.deleteProduct(id);cov_rtftiw29s().s[32]++;return{code:204};};cov_rtftiw29s().s[33]++;module.exports={getAll,getById,registerNewProduct,updateProduct,deleteProduct,productExists};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2R1Y3RzU2VydmljZXMuanMiXSwibmFtZXMiOlsicHJvZHVjdHNNb2RlbHMiLCJyZXF1aXJlIiwiZ2V0QWxsIiwicHJvZHVjdHMiLCJjb2RlIiwicmVzcG9uc2UiLCJnZXRCeUlkIiwiaWQiLCJwcm9kdWN0IiwibGVuZ3RoIiwibWVzc2FnZSIsInByb2R1Y3RFeGlzdHMiLCJuYW1lIiwiYWxsUHJvZHVjdHMiLCJmaW5kIiwicmVnaXN0ZXJOZXdQcm9kdWN0IiwicXVhbnRpdHkiLCJwcm9kdWN0RXhpc3RzcyIsInVwZGF0ZVByb2R1Y3QiLCJzZWFyY2hJZCIsImRlbGV0ZVByb2R1Y3QiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiMnRKQWVZO3lGQWZaLEtBQU1BLENBQUFBLGNBQWMseUJBQUdDLE9BQU8sQ0FBQywwQkFBRCxDQUFWLENBQXBCLEMsdUJBRUEsS0FBTUMsQ0FBQUEsTUFBTSxDQUFHLFNBQVksd0JBQ3pCLEtBQU1DLENBQUFBLFFBQVEseUJBQUcsS0FBTUgsQ0FBQUEsY0FBYyxDQUFDRSxNQUFmLEVBQVQsQ0FBZCxDQUR5Qix1QkFFekIsR0FBSSxDQUFDQyxRQUFMLENBQWUsd0RBQU8sQ0FBRUMsSUFBSSxDQUFFLEdBQVIsQ0FBYUMsUUFBUSxDQUFFLElBQXZCLENBQVAsQ0FBcUMsQ0FBcEQsZ0NBRnlCLHVCQUd6QixNQUFPLENBQUVELElBQUksQ0FBRSxHQUFSLENBQWFDLFFBQVEsQ0FBRUYsUUFBdkIsQ0FBUCxDQUNELENBSkQsQyx1QkFNQSxLQUFNRyxDQUFBQSxPQUFPLENBQUcsS0FBT0MsQ0FBQUEsRUFBUCxFQUFjLHdCQUM1QixLQUFNQyxDQUFBQSxPQUFPLHlCQUFHLEtBQU1SLENBQUFBLGNBQWMsQ0FBQ00sT0FBZixDQUF1QkMsRUFBdkIsQ0FBVCxDQUFiLENBRDRCLHVCQUU1QixHQUFJQyxPQUFPLENBQUNDLE1BQVIsR0FBbUIsQ0FBdkIsQ0FBMEIsd0RBQU8sQ0FBRUwsSUFBSSxDQUFFLEdBQVIsQ0FBYU0sT0FBTyxDQUFFLENBQUVBLE9BQU8sQ0FBRSxtQkFBWCxDQUF0QixDQUFQLENBQWdFLENBQTFGLGdDQUY0Qix3QkFHNUIsTUFBTyxDQUFFTixJQUFJLENBQUUsR0FBUixDQUFhQyxRQUFRLENBQUVHLE9BQU8sQ0FBQyxDQUFELENBQTlCLENBQVAsQ0FDRCxDQUpELEMsd0JBTUEsS0FBTUcsQ0FBQUEsYUFBYSxDQUFHLEtBQU9DLENBQUFBLElBQVAsRUFBZ0Isd0JBQ3BDLEtBQU1DLENBQUFBLFdBQVcsMEJBQUcsS0FBTVgsQ0FBQUEsTUFBTSxFQUFmLENBQWpCLENBRG9DLHdCQUVwQyxNQUFPVyxDQUFBQSxXQUFXLENBQUNSLFFBQVosQ0FBcUJTLElBQXJCLENBQTJCTixPQUFELEVBQWEsc0RBQUFBLENBQUFBLE9BQU8sQ0FBQ0ksSUFBUixHQUFpQkEsSUFBakIsQ0FBcUIsQ0FBNUQsQ0FBUCxDQUNELENBSEQsQyx3QkFLQSxLQUFNRyxDQUFBQSxrQkFBa0IsQ0FBRyxNQUFPSCxJQUFQLENBQWFJLFFBQWIsR0FBMEIsd0JBQ25ELEtBQU1DLENBQUFBLGNBQWMsMEJBQUcsS0FBTU4sQ0FBQUEsYUFBYSxDQUFDQyxJQUFELENBQXRCLENBQXBCLENBRUEsS0FBTUosQ0FBQUEsT0FBTywwQkFBRyxLQUFNUixDQUFBQSxjQUFjLENBQUNlLGtCQUFmLENBQWtDSCxJQUFsQyxDQUF3Q0ksUUFBeEMsQ0FBVCxDQUFiLENBSG1ELHdCQUluRCxHQUFJQyxjQUFKLENBQW9CLHlEQUFPLENBQUViLElBQUksQ0FBRSxHQUFSLENBQWFNLE9BQU8sQ0FBRSxDQUFFQSxPQUFPLENBQUUsd0JBQVgsQ0FBdEIsQ0FBUCxDQUFxRSxDQUF6RixnQ0FKbUQsd0JBTW5ELE1BQU8sQ0FBRU4sSUFBSSxDQUFFLEdBQVIsQ0FDTEMsUUFBUSxDQUFFLENBQ05FLEVBQUUsQ0FBRUMsT0FBTyxDQUFDRCxFQUROLENBRU5LLElBRk0sQ0FHTkksUUFITSxDQURMLENBQVAsQ0FNRCxDQVpELEMsd0JBY0EsS0FBTUUsQ0FBQUEsYUFBYSxDQUFHLE1BQU9YLEVBQVAsQ0FBV0ssSUFBWCxDQUFpQkksUUFBakIsR0FBOEIsd0JBQ2xELEtBQU1HLENBQUFBLFFBQVEsMEJBQUcsS0FBTW5CLENBQUFBLGNBQWMsQ0FBQ00sT0FBZixDQUF1QkMsRUFBdkIsQ0FBVCxDQUFkLENBQ0E7QUFGa0Qsd0JBSWxELEdBQUlZLFFBQVEsQ0FBQ1YsTUFBVCxHQUFvQixDQUF4QixDQUEyQix5REFBTyxDQUFFTCxJQUFJLENBQUUsR0FBUixDQUFhTSxPQUFPLENBQUUsQ0FBRUEsT0FBTyxDQUFFLG1CQUFYLENBQXRCLENBQVAsQ0FBZ0UsQ0FBM0YsZ0NBRUEsS0FBTUYsQ0FBQUEsT0FBTywwQkFBRyxLQUFNUixDQUFBQSxjQUFjLENBQUNrQixhQUFmLENBQTZCWCxFQUE3QixDQUFpQ0ssSUFBakMsQ0FBdUNJLFFBQXZDLENBQVQsQ0FBYixDQU5rRCx3QkFPbEQsTUFBTyxDQUFFWixJQUFJLENBQUUsR0FBUixDQUFhQyxRQUFRLENBQUVHLE9BQXZCLENBQVAsQ0FDRCxDQVJELEMsd0JBVUEsS0FBTVksQ0FBQUEsYUFBYSxDQUFHLEtBQU9iLENBQUFBLEVBQVAsRUFBYyx3QkFDbEMsS0FBTVksQ0FBQUEsUUFBUSwwQkFBRyxLQUFNbkIsQ0FBQUEsY0FBYyxDQUFDTSxPQUFmLENBQXVCQyxFQUF2QixDQUFULENBQWQsQ0FEa0Msd0JBRWxDLEdBQUlZLFFBQVEsQ0FBQ1YsTUFBVCxHQUFvQixDQUF4QixDQUEyQix5REFBTyxDQUFFTCxJQUFJLENBQUUsR0FBUixDQUFhTSxPQUFPLENBQUUsQ0FBRUEsT0FBTyxDQUFFLG1CQUFYLENBQXRCLENBQVAsQ0FBZ0UsQ0FBM0YsZ0NBRmtDLHdCQUdsQyxLQUFNVixDQUFBQSxjQUFjLENBQUNvQixhQUFmLENBQTZCYixFQUE3QixDQUFOLENBSGtDLHdCQUlsQyxNQUFPLENBQUVILElBQUksQ0FBRSxHQUFSLENBQVAsQ0FDRCxDQUxELEMsd0JBT0FpQixNQUFNLENBQUNDLE9BQVAsQ0FBaUIsQ0FDZnBCLE1BRGUsQ0FFZkksT0FGZSxDQUdmUyxrQkFIZSxDQUlmRyxhQUplLENBS2ZFLGFBTGUsQ0FNZlQsYUFOZSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHByb2R1Y3RzTW9kZWxzID0gcmVxdWlyZSgnLi4vbW9kZWxzL3Byb2R1Y3RzTW9kZWxzJyk7XG5cbmNvbnN0IGdldEFsbCA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgcHJvZHVjdHMgPSBhd2FpdCBwcm9kdWN0c01vZGVscy5nZXRBbGwoKTtcbiAgaWYgKCFwcm9kdWN0cykgcmV0dXJuIHsgY29kZTogNTAwLCByZXNwb25zZTogbnVsbCB9OyBcbiAgcmV0dXJuIHsgY29kZTogMjAwLCByZXNwb25zZTogcHJvZHVjdHMgfTtcbn07XG5cbmNvbnN0IGdldEJ5SWQgPSBhc3luYyAoaWQpID0+IHtcbiAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IHByb2R1Y3RzTW9kZWxzLmdldEJ5SWQoaWQpO1xuICBpZiAocHJvZHVjdC5sZW5ndGggPT09IDApIHJldHVybiB7IGNvZGU6IDQwNCwgbWVzc2FnZTogeyBtZXNzYWdlOiAnUHJvZHVjdCBub3QgZm91bmQnIH0gfTtcbiAgcmV0dXJuIHsgY29kZTogMjAwLCByZXNwb25zZTogcHJvZHVjdFswXSB9O1xufTtcblxuY29uc3QgcHJvZHVjdEV4aXN0cyA9IGFzeW5jIChuYW1lKSA9PiB7XG4gIGNvbnN0IGFsbFByb2R1Y3RzID0gYXdhaXQgZ2V0QWxsKCk7XG4gIHJldHVybiBhbGxQcm9kdWN0cy5yZXNwb25zZS5maW5kKChwcm9kdWN0KSA9PiBwcm9kdWN0Lm5hbWUgPT09IG5hbWUpO1xufTtcblxuY29uc3QgcmVnaXN0ZXJOZXdQcm9kdWN0ID0gYXN5bmMgKG5hbWUsIHF1YW50aXR5KSA9PiB7XG4gIGNvbnN0IHByb2R1Y3RFeGlzdHNzID0gYXdhaXQgcHJvZHVjdEV4aXN0cyhuYW1lKTtcblxuICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgcHJvZHVjdHNNb2RlbHMucmVnaXN0ZXJOZXdQcm9kdWN0KG5hbWUsIHF1YW50aXR5KTtcbiAgaWYgKHByb2R1Y3RFeGlzdHNzKSByZXR1cm4geyBjb2RlOiA0MDksIG1lc3NhZ2U6IHsgbWVzc2FnZTogJ1Byb2R1Y3QgYWxyZWFkeSBleGlzdHMnIH0gfTtcblxuICByZXR1cm4geyBjb2RlOiAyMDEsXG4gICAgcmVzcG9uc2U6IHtcbiAgICAgICAgaWQ6IHByb2R1Y3QuaWQsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIHF1YW50aXR5LFxuICAgICAgfSB9O1xufTtcblxuY29uc3QgdXBkYXRlUHJvZHVjdCA9IGFzeW5jIChpZCwgbmFtZSwgcXVhbnRpdHkpID0+IHtcbiAgY29uc3Qgc2VhcmNoSWQgPSBhd2FpdCBwcm9kdWN0c01vZGVscy5nZXRCeUlkKGlkKTtcbiAgLy8gY29uc3QgaWRFeGlzdHMgPSBhbGxQcm9kdWN0cy5maW5kKChwcm9kdWN0KSA9PiBwcm9kdWN0LmlkID09PSBpZCk7XG5cbiAgaWYgKHNlYXJjaElkLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHsgY29kZTogNDA0LCBtZXNzYWdlOiB7IG1lc3NhZ2U6ICdQcm9kdWN0IG5vdCBmb3VuZCcgfSB9O1xuXG4gIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBwcm9kdWN0c01vZGVscy51cGRhdGVQcm9kdWN0KGlkLCBuYW1lLCBxdWFudGl0eSk7XG4gIHJldHVybiB7IGNvZGU6IDIwMCwgcmVzcG9uc2U6IHByb2R1Y3QgfTtcbn07XG5cbmNvbnN0IGRlbGV0ZVByb2R1Y3QgPSBhc3luYyAoaWQpID0+IHtcbiAgY29uc3Qgc2VhcmNoSWQgPSBhd2FpdCBwcm9kdWN0c01vZGVscy5nZXRCeUlkKGlkKTtcbiAgaWYgKHNlYXJjaElkLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHsgY29kZTogNDA0LCBtZXNzYWdlOiB7IG1lc3NhZ2U6ICdQcm9kdWN0IG5vdCBmb3VuZCcgfSB9O1xuICBhd2FpdCBwcm9kdWN0c01vZGVscy5kZWxldGVQcm9kdWN0KGlkKTtcbiAgcmV0dXJuIHsgY29kZTogMjA0IH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZ2V0QWxsLFxuICBnZXRCeUlkLFxuICByZWdpc3Rlck5ld1Byb2R1Y3QsXG4gIHVwZGF0ZVByb2R1Y3QsXG4gIGRlbGV0ZVByb2R1Y3QsXG4gIHByb2R1Y3RFeGlzdHMsXG59OyJdfQ==